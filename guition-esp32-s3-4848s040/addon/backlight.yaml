# Backlight
light:
  - platform: monochromatic
    name: Backlight
    id: backlight
    output: backlight_output
    restore_mode: ALWAYS_ON
    default_transition_length: 1s
    internal: true

# Wake the screen on touch or media stop; sleeps after 10s of inactivity
# if media is not playing. mode: restart resets the countdown on each tap.
script:
  - id: backlight_wake_timeout
    mode: restart
    then:
      - lambda: 'id(is_screen_dimmed) = false;'
      - light.turn_on:
          id: backlight
          brightness: 100%
          transition_length: 1s
      - lvgl.resume:
      - delay: 10s
      - if:
          condition:
            lambda: 'return !id(media_player_state_sensor).has_state() || id(media_player_state_sensor).state != "playing";'
          then:
            - lambda: 'id(is_screen_dimmed) = true;'
            - light.turn_on:
                id: backlight
                brightness: 30%
                transition_length: 3s
